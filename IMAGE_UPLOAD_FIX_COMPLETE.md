# โ ุชุญุฏูุซุงุช ุฅุตูุงุญ ูุดููุฉ ุฑูุน ุงูุตูุฑ

## ๐ ููุฎุต ุงููุดููุฉ
ุงูุตูุฑ ูุง ุชุชุญุฏุซ/ูุง ุชุธูุฑ ุจุนุฏ ุฑูุนูุง ูู ุงูุฌูุงุฒ ูุญูุธ ุงูุชุนุฏููุงุช.

## ๐ง ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ

### 1๏ธโฃ ุฅุถุงูุฉ ุญุงูุฉ ุฌุฏูุฏุฉ ูุชุชุจุน ุฃุฎุทุงุก ุงูุตูุฑ
```javascript
const [imageErrors, setImageErrors] = useState({});
```
- ุชุชุจุน ุงูุตูุฑ ุงูุชู ูุดูุช ูู ุงูุชุญููู
- ุชูููู ุนุฑุถ ุฑุณุงูุฉ ุจุฏููุฉ ููุตูุฑ ุงูููุณูุฑุฉ

### 2๏ธโฃ ุชุญุณูู ุฏุงูุฉ `getImageUrl()`
```javascript
const getImageUrl = (path) => {
    if (!path) return "/placeholder.png";
    
    // ุฅุฐุง ูุงูุช blob URL ุฃู data URL ุฃู HTTP/HTTPSุ ุงุณุชุฎุฏููุง ูุจุงุดุฑุฉ
    if (path.startsWith('blob:') || path.startsWith('data:') || path.startsWith('http')) {
        return path;
    }
    
    // ุฅุฐุง ูุงูุช ูุณุงุฑ ูุณุจูุ ุฃุถู API URL
    if (path.startsWith('/')) {
        return `${process.env.NEXT_PUBLIC_API_URL}${path}`;
    }
    
    // ูู ุงูุญุงูุงุช ุงูุฃุฎุฑูุ ุฃุถู ุฃูุงู ุงููุณุงุฑ
    return `${process.env.NEXT_PUBLIC_API_URL}/${path}`;
};
```

**ุงูููุงุฆุฏ:**
- ูุนุงูุฌุฉ ุฃูุถู ูููุณุงุฑุงุช ุงููุฎุชููุฉ
- ุฏุนู blob URLs ูููุนุงููุงุช ุงููุญููุฉ
- ุฏุนู data URLs ูุงูุฑูุงุจุท ุงูุฎุงุฑุฌูุฉ
- ุจูุงุก ุตุญูุญ ููุฑูุงุจุท ุงููุณุจูุฉ

### 3๏ธโฃ ุชุญุณูู ุฌุฒุก ุนุฑุถ ุงูุตูุฑ (JSX)
```javascript
<div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
    {previews.map((src, index) => (
        <div key={index} className="relative aspect-[3/4] rounded-2xl overflow-hidden shadow-md border-2 border-gray-100 bg-gray-100">
            {!imageErrors[index] ? (
                <img 
                    src={getImageUrl(src)} 
                    className="w-full h-full object-cover" 
                    alt={`ูุนุงููุฉ ${index + 1}`}
                    onError={() => {
                        setImageErrors(prev => ({...prev, [index]: true}));
                    }}
                />
            ) : (
                <div className="w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-200 to-gray-300">
                    <div className="text-center">
                        <ImageIcon className="mx-auto text-gray-400 mb-2" size={32} />
                        <p className="text-xs text-gray-500">ุตูุฑุฉ ุบูุฑ ูุชุงุญุฉ</p>
                    </div>
                </div>
            )}
        </div>
    ))}
</div>
```

**ุงูุชุญุณููุงุช:**
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุชุญููู (onError event)
- ุนุฑุถ ุฑุณุงูุฉ ุจุฏููุฉ ุฌูููุฉ ุจุฏูุงู ูู ุงูุตูุฑุฉ ุงูููุณูุฑุฉ
- ุฎูููุฉ ุฑูุงุฏูุฉ ุนูุฏ ูุดู ุงูุชุญููู

### 4๏ธโฃ ุชุญุณูู `fetchProduct()` ุจุชุณุฌูู ุชูุตููู
```javascript
console.log('๐ฆ ุจูุงูุงุช ุงูููุชุฌ ุงูููุญููุฉ:', {
    images: data.images,
    image: data.image,
    category: data.category
});

// ... ููุฏ ุงูุฏุงูุฉ ...

console.log('๐ผ๏ธ ุงูุตูุฑ ุงููุฑุงุฏ ุนุฑุถูุง:', imagesToShow);
setPreviews(imagesToShow);
setImageErrors({}); // ุงูุณุญ ุฃู ุฃุฎุทุงุก ุณุงุจูุฉ
```

### 5๏ธโฃ ุชุญุณูู `submitHandler()` ุจุชุณุฌูู ุชูุตููู
```javascript
console.log('โ ุชู ุงูุฑูุน ุจูุฌุงุญ - ุงูุงุณุชุฌุงุจุฉ:', {
    images: response.data.images,
    image: response.data.image,
    status: response.status
});

console.log('๐ผ๏ธ ุชุนููู ูุนุงููุงุช blob ูุคูุชุฉ:', blobPreviews.length);
setPreviews(blobPreviews);

console.log('โณ ูู ุงูุชุธุงุฑ ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช...');
setTimeout(() => {
    console.log('๐ ุฅุนุงุฏุฉ ุฌูุจ ุจูุงูุงุช ุงูููุชุฌ ูู ุงูุฎุงุฏู');
    fetchProduct();
}, 2000);
```

**ุงูููุงุฆุฏ:**
- ุชุชุจุน ุฏููู ูุนูููุฉ ุงูุฑูุน ูุงูุชุญุฏูุซ
- ูุนุฑูุฉ ุงูููุช ุงูุฐู ุชุณุชุบุฑูู ูู ูุฑุญูุฉ
- ุชุณููู ุชุตุญูุญ ุงููุดุงูู ุนูุฏ ุญุฏูุซูุง

### 6๏ธโฃ ุฒูุงุฏุฉ ุงูุชุฃุฎูุฑ ูุจู ุฅุนุงุฏุฉ ุงูุฌูุจ
```javascript
// ูู: 1500ms
// ุฅูู: 2000ms
setTimeout(() => {
    fetchProduct();
}, 2000);
```
**ุงูุณุจุจ:** ุฅุนุทุงุก ุงูุฎุงุฏู ููุชุงู ูุงููุงู ููุนุงูุฌุฉ ุงูุตูุฑ

## ๐ ุงููููุงุช ุงููุนุฏูุฉ
- `app/admin/product/edit/[id]/page.js` - 5 ุชุญุฏูุซุงุช ุฑุฆูุณูุฉ

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ
- `IMAGE_UPLOAD_DEBUG.md` - ุฏููู ุชุตุญูุญ ุดุงูู

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงูุชุญ ุตูุญุฉ ุชุนุฏูู ููุชุฌ
```
http://localhost:3000/admin/products/[id]/edit
```

### 2. ุงูุชุญ Developer Console (F12)
- ุงุฐูุจ ุฅูู "Console" tab

### 3. ุงุฎุชุฑ ุตูุฑุฉ ุฌุฏูุฏุฉ
- ุงููุฑ ุนูู "๐ ุฑูุน ูู ุงูุฌูุงุฒ"
- ุงุฎุชุฑ ุตูุฑุฉ ูู ุฌูุงุฒู

### 4. ุงุญูุธ ุงูุชุนุฏููุงุช
- ุงุถุบุท "ุญูุธ ุงูุชุนุฏููุงุช"

### 5. ุฑุงูุจ ุงูุณุฌูุงุช
ุณุชุธูุฑ ุงูุฑุณุงุฆู ุงูุชุงููุฉ:
```
โ ุชู ุงูุฑูุน ุจูุฌุงุญ - ุงูุงุณุชุฌุงุจุฉ: {...}
๐ผ๏ธ ุชุนููู ูุนุงููุงุช blob ูุคูุชุฉ: 1
โณ ูู ุงูุชุธุงุฑ ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช...
๐ ุฅุนุงุฏุฉ ุฌูุจ ุจูุงูุงุช ุงูููุชุฌ ูู ุงูุฎุงุฏู
๐ฆ ุจูุงูุงุช ุงูููุชุฌ ุงูููุญููุฉ: {...}
๐ผ๏ธ ุงูุตูุฑ ุงููุฑุงุฏ ุนุฑุถูุง: [...]
```

### 6. ุชุญูู ูู ุงูุตูุฑ
- ูุฌุจ ุฃู ุชุธูุฑ ุงูุตูุฑ ุงููุญุฏุซุฉ ูู ุงููุนุงููุฉ
- ุฅุฐุง ูุดูุช ุงูุตูุฑุฉุ ุณุชุธูุฑ ุฑุณุงูุฉ "ุตูุฑุฉ ุบูุฑ ูุชุงุญุฉ"

## โจ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

โ **ุจุนุฏ ุงูุชุญุฏูุซุงุช:**
1. ุงูุตูุฑ ุชุธูุฑ ุจูุฌุงุญ ุจุนุฏ ุงูุฑูุน ูุงูุญูุธ
2. ุฑุณุงุฆู ุชุตุญูุญ ูุงุถุญุฉ ูู ุงููููุณูู
3. ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
4. ูุงุฌูุฉ ูุณุชุฎุฏู ุฃุฌูู ุนูุฏ ูุดู ุงูุตูุฑุฉ
5. ุชุณููู ุชุตุญูุญ ุงููุดุงูู ุงููุณุชูุจููุฉ

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

1. ุชุญูู ูู `IMAGE_UPLOAD_DEBUG.md` ููุญุตูู ุนูู ุฏููู ุดุงูู
2. ุงูุชุญ DevTools ูุฑุงุฌุน ุณุฌูุงุช ุงููููุณูู
3. ุชุญูู ูู Network tab ูุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู
4. ุชุฃูุฏ ูู ุฃู `NEXT_PUBLIC_API_URL` ุตุญูุญ ูู `.env.local`
5. ุชุญูู ูู ุณุฌูุงุช ุงูุฎุงุฏู (backend) ููุฃุฎุทุงุก

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

- **ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูููู**: 5MB
- **ุงูุตูุบ ุงููุฏุนููุฉ**: JPG, PNG, GIF, WebP, SVG
- **ุงูุชุฃุฎูุฑ ุงููุชููุน**: 2-3 ุซูุงูู
- **Cache**: ูุฏ ุชุญุชุงุฌ ูุชุญุฏูุซ F5 ุฅุฐุง ูู ุชุธูุฑ ุงูุตูุฑ

---

**ุงูุชุงุฑูุฎ**: 14 ููุงูุฑ 2026
**ุงูุญุงูุฉ**: โ ุชู ุงูุงูุชูุงุก ูู ุงูุชุญุฏูุซุงุช
