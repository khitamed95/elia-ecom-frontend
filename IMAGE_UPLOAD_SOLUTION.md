# ๐ฏ ููุฎุต ุงูุญู ุงูููุงุฆู - ูุดููุฉ ุนุฏู ุธููุฑ ุงูุตูุฑ

## ๐ ุงููุดููุฉ ุงูุฃุณุงุณูุฉ
ุงูุตูุฑ ูุง ุชุชุญุฏุซ/ูุง ุชุธูุฑ ุจุนุฏ ุฑูุนูุง ูุญูุธ ุงูุชุนุฏููุงุช ูู ุตูุญุฉ ุชุนุฏูู ุงูููุชุฌ.

## ๐ ุชุญููู ุงููุดููุฉ

### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:
1. **ุนุฏู ูุนุงูุฌุฉ ุฃุฎุทุงุก ุชุญููู ุงูุตูุฑ**: ูุง ุชูุฌุฏ ุทุฑููุฉ ููุดู ุงูุตูุฑ ุงูููุณูุฑุฉ
2. **ูุณุงุฑุงุช ุงูุตูุฑ ุบูุฑ ุตุญูุญุฉ**: ุงูุฎุงุฏู ูุฏ ูุนูุฏ ูุณุงุฑุงุช ูุง ุชุนูู
3. **ููุต ูุนูููุงุช ุงูุชุตุญูุญ**: ูุง ููุฌุฏ logging ูุงูู ููุชุงุจุนุฉ ุงููุดููุฉ
4. **ููุช ุงูุชุธุงุฑ ูุตูุฑ**: 1.5 ุซุงููุฉ ูุฏ ูุง ุชููู ููุนุงูุฌุฉ ุงูุตูุฑ

## โ ุงูุญู ุงููุทุจู

### ุงูุชุญุฏูุซุงุช ุงูุฎูุณ ุงูุฑุฆูุณูุฉ:

#### 1๏ธโฃ **ุฅุถุงูุฉ ูุธุงู ุชุชุจุน ุฃุฎุทุงุก ุงูุตูุฑ**
```javascript
// ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ
const [imageErrors, setImageErrors] = useState({});

// ูู JSX
{!imageErrors[index] ? (
    <img 
        src={getImageUrl(src)} 
        onError={() => setImageErrors(prev => ({...prev, [index]: true}))}
    />
) : (
    <div>ุตูุฑุฉ ุบูุฑ ูุชุงุญุฉ</div>
)}
```

**ุงููุงุฆุฏุฉ:** ุงูุขู ูููู ูุดู ุงูุตูุฑ ุงูููุณูุฑุฉ ูุนุฑุถ ุฑุณุงูุฉ ุจุฏููุฉ

#### 2๏ธโฃ **ุชุญุณูู ุฏุงูุฉ ุจูุงุก ุฑุงุจุท ุงูุตูุฑ**
```javascript
// ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ุงููุงูู
const getImageUrl = (path) => {
    if (!path) return "/placeholder.png";
    
    // blob URLs (ูุนุงููุงุช ูุญููุฉ)
    if (path.startsWith('blob:')) return path;
    
    // data URLs
    if (path.startsWith('data:')) return path;
    
    // ุฑูุงุจุท ุฎุงุฑุฌูุฉ
    if (path.startsWith('http')) return path;
    
    // ูุณุงุฑุงุช ูุณุจูุฉ ูุจุฏุฃูุง /
    if (path.startsWith('/')) 
        return `${process.env.NEXT_PUBLIC_API_URL}${path}`;
    
    // ูุณุงุฑุงุช ุฃุฎุฑู
    return `${process.env.NEXT_PUBLIC_API_URL}/${path}`;
};
```

**ุงููุงุฆุฏุฉ:** ูุนุงูุฌุฉ ุตุญูุญุฉ ูุฌููุน ุฃููุงุน ุงููุณุงุฑุงุช

#### 3๏ธโฃ **ุชุญุณูู ูุนุงูุฌุฉ ุงููุนุงููุงุช ุจุนุฏ ุงูุฑูุน**
```javascript
// ูู submitHandler - ุจุนุฏ ุฑูุน ุงููููุงุช
const blobPreviews = selectedFiles.map(file => URL.createObjectURL(file));
console.log('๐ผ๏ธ ุชุนููู ูุนุงููุงุช blob ูุคูุชุฉ:', blobPreviews.length);
setPreviews(blobPreviews); // ุนุฑุถ ุงูุตูุฑ ููุฑุงู

// ุจุนุฏ 2 ุซุงููุฉ
setTimeout(() => {
    console.log('๐ ุฅุนุงุฏุฉ ุฌูุจ ุจูุงูุงุช ุงูููุชุฌ ูู ุงูุฎุงุฏู');
    fetchProduct(); // ุฌูุจ ุงูุตูุฑ ูู ุงูุฎุงุฏู
}, 2000);
```

**ุงููุงุฆุฏุฉ:** ุนุฑุถ ููุฑู ููุตูุฑ ุงููุญููุฉ ูุญููุงู + ุชุญุฏูุซ ูู ุงูุฎุงุฏู

#### 4๏ธโฃ **ุฅุถุงูุฉ logging ุชูุตููู ูุชุชุจุน ุงูุนูููุฉ**

**ูู fetchProduct():**
```javascript
console.log('๐ฆ ุจูุงูุงุช ุงูููุชุฌ ุงูููุญููุฉ:', {
    images: data.images,
    image: data.image,
    category: data.category
});

console.log('๐ผ๏ธ ุงูุตูุฑ ุงููุฑุงุฏ ุนุฑุถูุง:', imagesToShow);
setPreviews(imagesToShow);
setImageErrors({}); // ุงูุณุญ ุงูุฃุฎุทุงุก ุงูุณุงุจูุฉ
```

**ูู submitHandler():**
```javascript
console.log('โ ุชู ุงูุฑูุน ุจูุฌุงุญ - ุงูุงุณุชุฌุงุจุฉ:', {
    images: response.data.images,
    image: response.data.image,
    status: response.status
});

console.log('โณ ูู ุงูุชุธุงุฑ ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช...');
```

**ุงููุงุฆุฏุฉ:** ูุนุฑูุฉ ุจุงูุถุจุท ุฃูู ุชูููุช ุงูุนูููุฉ ุฅุฐุง ุญุฏุซุช ูุดููุฉ

#### 5๏ธโฃ **ุฒูุงุฏุฉ ุงูุชุฃุฎูุฑ ูุจู ุฅุนุงุฏุฉ ุงูุฌูุจ**
```javascript
// ูู 1500ms ุฅูู 2000ms
setTimeout(() => {
    fetchProduct();
}, 2000);
```

**ุงููุงุฆุฏุฉ:** ุฅุนุทุงุก ุงูุฎุงุฏู ููุชุงู ูุงููุงู ููุนุงูุฌุฉ ูุญูุธ ุงูุตูุฑ

## ๐งช ุฎุทูุงุช ุงูุชุญูู

### ุงูุฎุทูุฉ 1: ุชุดุบูู ุงูุฎุงุฏู
```bash
npm run dev
```

### ุงูุฎุทูุฉ 2: ูุชุญ ุตูุญุฉ ุชุนุฏูู ุงูููุชุฌ
```
http://localhost:3000/admin/products/1/edit
```

### ุงูุฎุทูุฉ 3: ูุชุญ Developer Console
- ุงุถุบุท **F12**
- ุงุฐูุจ ุฅูู **Console** tab

### ุงูุฎุทูุฉ 4: ุชุญุฏูุซ ุตูุฑุฉ ุงูููุชุฌ
1. ุงููุฑ ุนูู "๐ ุฑูุน ูู ุงูุฌูุงุฒ"
2. ุงุฎุชุฑ ุตูุฑุฉ (JPG, PNG, etc)
3. ุงุถุบุท "ุญูุธ ุงูุชุนุฏููุงุช"

### ุงูุฎุทูุฉ 5: ูุฑุงูุจุฉ ุงูุณุฌูุงุช
ูุฌุจ ุฃู ุชุธูุฑ ุงูุฑุณุงุฆู ุงูุชุงููุฉ ุจุงูุชุฑุชูุจ:
```
โ ุชู ุงูุฑูุน ุจูุฌุงุญ - ุงูุงุณุชุฌุงุจุฉ: {...}
๐ผ๏ธ ุชุนููู ูุนุงููุงุช blob ูุคูุชุฉ: 1
โณ ูู ุงูุชุธุงุฑ ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช...
๐ ุฅุนุงุฏุฉ ุฌูุจ ุจูุงูุงุช ุงูููุชุฌ ูู ุงูุฎุงุฏู
๐ฆ ุจูุงูุงุช ุงูููุชุฌ ุงูููุญููุฉ: {...}
๐ผ๏ธ ุงูุตูุฑ ุงููุฑุงุฏ ุนุฑุถูุง: [...]
```

### ุงูุฎุทูุฉ 6: ุงูุชุญูู ูู ุงูุตูุฑ
- ูุฌุจ ุฃู ุชุธูุฑ ุงูุตูุฑ ูู ูุนุงููุฉ 2x2 ุฃู 4 ุฃุนูุฏุฉ
- ุงูุตูุฑ ูุฌุจ ุฃู ุชููู ูุฑุฆูุฉ ููุฑุงู
- ุฅุฐุง ูุดูุชุ ุณุชุธูุฑ ุฑุณุงูุฉ "ุตูุฑุฉ ุบูุฑ ูุชุงุญุฉ"

## ๐ ููุงุฑูุฉ ูุจู ูุจุนุฏ

| ุงูุฌุงูุจ | ูุจู | ุจุนุฏ |
|--------|-----|-----|
| ุนุฑุถ ุงูุตูุฑ | โ ูุง ุชุธูุฑ | โ ุชุธูุฑ ุจูุฌุงุญ |
| ุงูุฃุฎุทุงุก ุงูููุณูุฑุฉ | โ ุตูุฑุฉ ููุณูุฑุฉ ููุท | โ ุฑุณุงูุฉ ุฌูููุฉ |
| ูุนูููุงุช ุงูุชุตุญูุญ | โ ูุง ุชูุฌุฏ | โ ุณุฌูุงุช ููุตูุฉ |
| ูุนุงูุฌุฉ ุงููุณุงุฑุงุช | โ๏ธ ุจุณูุทุฉ | โ ุดุงููุฉ |
| ููุช ุงูุงูุชุธุงุฑ | โ๏ธ 1.5s | โ 2.0s |

## ๐ ุงูููุงุฆุฏ ุงูุฅุฌูุงููุฉ

### ูููุณุชุฎุฏู:
- โ ุงูุตูุฑ ุชุธูุฑ ุจุดูู ุตุญูุญ ุจุนุฏ ุงูุฑูุน
- โ ูุงุฌูุฉ ุฃุฌูู ุนูุฏ ูุดู ุงูุตูุฑุฉ
- โ ุชุฌุฑุจุฉ ุฃูุถู ูุฃูุซุฑ ููุซูููุฉ

### ูููุทูุฑ:
- โ ูุนุฑูุฉ ุจุงูุถุจุท ูุง ูุญุฏุซ ูู ูู ูุฑุญูุฉ
- โ ุณูููุฉ ุชุชุจุน ุงููุดุงูู ูู ุงููุณุชูุจู
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- โ ุฏุนู ุฃููุงุน ูุฎุชููุฉ ูู ูุณุงุฑุงุช ุงูุตูุฑ

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. **app/admin/product/edit/[id]/page.js**
   - ุฅุถุงูุฉ `imageErrors` state
   - ุชุญุณูู `getImageUrl()` 
   - ุชุญุณูู `fetchProduct()`
   - ุชุญุณูู `submitHandler()`
   - ุชุญุณูู ุนุฑุถ ุงูุตูุฑ ูู JSX

## ๐ ูููุงุช ุงููุณุงุนุฏุฉ ุงูุฌุฏูุฏุฉ

1. **IMAGE_UPLOAD_DEBUG.md** - ุฏููู ุชุตุญูุญ ุดุงูู
2. **IMAGE_UPLOAD_FIX_COMPLETE.md** - ููุฎุต ุงูุชุญุฏูุซุงุช

## โ๏ธ ุฅุฐุง ูู ุชุธูุฑ ุงูุตูุฑ

### ุชุญูู ูู:
1. **F12 โ Console** - ุงุจุญุซ ุนู ุงูุฑุณุงุฆู ุงูุญูุฑุงุก
2. **F12 โ Network** - ุชุญูู ูู ุงุณุชุฌุงุจุฉ PUT request
3. **.env.local** - ุชุฃูุฏ ูู `NEXT_PUBLIC_API_URL` ุตุญูุญ
4. **Backend logs** - ุชุญูู ูู ุฃู ุงูุตูุฑ ุชูุญูุธ ุจูุฌุงุญ

### ุงูุฑุณุงุฆู ุงูุดุงุฆุนุฉ:
- `ุตูุฑุฉ ุบูุฑ ูุชุงุญุฉ` = ูุณุงุฑ ุงูุตูุฑุฉ ุฎุงุทุฆ
- `Status: 413` = ุญุฌู ุงูููู ุฃูุจุฑ ูู 5MB
- `Status: 500` = ุฎุทุฃ ูู ุงูุฎุงุฏู
- `CORS error` = ูุดููุฉ ูู ุฅุนุฏุงุฏุงุช CORS

## ๐ ูููุณุงุนุฏุฉ ุงูุฅุถุงููุฉ

ุฑุงุฌุน **IMAGE_UPLOAD_DEBUG.md** ููุญุตูู ุนูู:
- ุดุฑุญ ููุตู ููู ุญุงูุฉ
- ุฎุทูุงุช ุชุตุญูุญ ูุชูุฏูุฉ
- ุฃูุซูุฉ ุนูู ุงูุงุณุชุฌุงุจุงุช ุงูุตุญูุญุฉ

---

**ุงูุชุงุฑูุฎ**: 14 ููุงูุฑ 2026  
**ุงูุญุงูุฉ**: โ ุชู ุงูุงูุชูุงุก ูู ุฌููุน ุงูุชุญุฏูุซุงุช  
**ุงูุฅุตุฏุงุฑ**: v1.0
